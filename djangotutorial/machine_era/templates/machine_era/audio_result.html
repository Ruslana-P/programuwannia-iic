<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Audio Analysis Results</title>
    {% load static %} 

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu+Sans+Mono:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'machine_era/style.css' %}">
    <link rel="stylesheet" href="{% static 'machine_era/results.css' %}">
</head>
<body>
    <canvas id="matrix-canvas"></canvas>
    <div id="content">
    <h2>AUDIO ANALYSIS REPORT LOG</h2>

    <a class="link" autofocus href="{% url 'machine_era:audio_upload' %}"> &lt; INITIATE.NEW.AUDIO.UPLOAD</a>
    <hr class="divider">

    {% for upload in audio_uploads %}
        <div class="result-item">
            <div class="uploaded-item-cnt">
                <div class="uploaded-item audio-preview">
                    <div>
                    <p>FILE_NAME: {{ upload.audio_file.name|cut:"audio_uploads/" }}</p>
                
                    <audio controls class="audio-player">
                        <source src="{{ upload.audio_file.url }}" type="audio/wav">
                        <source src="{{ upload.audio_file.url }}" type="audio/mp3">
                        <p>SYSTEM.ERROR: Audio player not supported by client browser.</p>
                    </audio>
                  </div>
            </div>
        </div>
        
            
            <div class="result-text">
                <h4>[SESSION.ID: {{ upload.id }}] | UPLOADED: {{ upload.uploaded_at|date:"Y-m-d H:i:s" }}</h4>
                <p><strong>ANALYSIS.OUTPUT:</strong> <span>{{ upload.analysis_result }}</span></p>
            </div>
        </div>
        <hr class="divider">
    {% empty %}
        <p>STATUS: NO.HISTORY.DATA.FOUND. Please upload an audio file to start.</p>
    {% endfor %}

    </div>
    <script src="{% static 'machine_era/matrix.js' %}"></script>
</body>
</html>